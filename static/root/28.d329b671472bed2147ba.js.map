{"version":3,"sources":["webpack:///./src/app/wsping/wsping.module.ts","webpack:///./src/app/wsping/wsping/wsping.component.ts","webpack:///./src/app/websockets/websockets.service.ts","webpack:///./src/app/websockets/websockets.service.ts.pre-build-optimizer.js","webpack:///./src/app/wsping/wsping/wsping.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/app/wsping/wsping/wsping.component.css.shim.ngstyle.js.pre-build-optimizer.js","webpack:///./src/app/wsping/wsping/wsping.component.html","webpack:///./src/app/wsping/wsping-routing.module.ts","webpack:///./src/app/wsping/wsping.module.ngfactory.js.pre-build-optimizer.js"],"names":["WspingModule","WspingComponent","ws","this","console","log","WebSocket","prototype","ngOnInit","_this","onreceive","message","response","Date","now","pingtime","ping","send","websockets_service_WebsocketsService","WebsocketsService","listeners","url","location","protocol","host","onopen","onclose","onmessage","_i","_a","length","listener","JSON","parse","data","ngOnDestroy","close","stringify","f","push","ngInjectableDef","core","factory","token","providedIn","RenderType_WspingComponent","encapsulation","styles","View_WspingComponent_0","_l","_v","en","$event","ad","component","_ck","View_WspingComponent_Host_0","WspingComponentNgFactory","WspingRoutingModule","__webpack_require__","d","__webpack_exports__","WspingModuleNgFactory","router_ngfactory","common","router","path"],"mappings":"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","file":"28.d329b671472bed2147ba.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { WspingRoutingModule } from './wsping-routing.module';\nimport { WspingComponent } from './wsping/wsping.component';\n\n@NgModule({\n  declarations: [WspingComponent],\n  imports: [\n    CommonModule,\n    WspingRoutingModule\n  ]\n})\nexport class WspingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { WebsocketsService } from 'src/app/websockets/websockets.service';\n// import * as WebSocket from 'isomorphic-ws';\n// const WebSocket = require('ws');\n// const WebSocket = require('isomorphic-ws');\n\n@Component({\n  selector: 'app-wsping',\n  templateUrl: './wsping.component.html',\n  styleUrls: ['./wsping.component.css'],\n})\nexport class WspingComponent implements OnInit {\n  response;\n  constructor(private ws: WebsocketsService) {\n    console.log({ WebSocket });\n  }\n\n  ngOnInit() {\n    this.ws.onreceive(message => {\n      console.log(`Received`, { message });\n      this.response = `Ping : ${Date.now() - message.pingtime}ms`;\n    });\n  }\n\n  ping() {\n    const pingtime = Date.now();\n    console.log({ pingtime });\n    this.ws.send({ pingtime });\n  }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class WebsocketsService implements OnDestroy {\n  ws;\n\n  listeners = [];\n\n  constructor() {\n    const url = `${location.protocol === 'http:' ? 'ws' : 'wss'}://${\n      location.host\n    }/ws/`;\n    console.log({ url });\n    this.ws = new WebSocket(url);\n    this.ws.onopen = () => {\n      console.log('connection opened');\n    };\n    this.ws.onclose = () => {\n      console.log('connection closed');\n    };\n    this.ws.onmessage = message => {\n      console.log('onmessage');\n      console.log(message);\n      for (const listener of this.listeners) {\n        listener(JSON.parse(message.data));\n      }\n    };\n  }\n\n  ngOnDestroy() {\n    this.ws.close();\n  }\n\n  send(message) {\n    this.ws.send(JSON.stringify(message));\n  }\n\n  onreceive(f) {\n    this.listeners.push(f);\n  }\n}\n","import { OnDestroy } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nvar WebsocketsService = /** @class */ (function () {\n    function WebsocketsService() {\n        var _this = this;\n        this.listeners = [];\n        var url = (location.protocol === 'http:' ? 'ws' : 'wss') + \"://\" + location.host + \"/ws/\";\n        console.log({ url: url });\n        this.ws = new WebSocket(url);\n        this.ws.onopen = function () {\n            console.log('connection opened');\n        };\n        this.ws.onclose = function () {\n            console.log('connection closed');\n        };\n        this.ws.onmessage = function (message) {\n            console.log('onmessage');\n            console.log(message);\n            for (var _i = 0, _a = _this.listeners; _i < _a.length; _i++) {\n                var listener = _a[_i];\n                listener(JSON.parse(message.data));\n            }\n        };\n    }\n    WebsocketsService.prototype.ngOnDestroy = function () {\n        this.ws.close();\n    };\n    WebsocketsService.prototype.send = function (message) {\n        this.ws.send(JSON.stringify(message));\n    };\n    WebsocketsService.prototype.onreceive = function (f) {\n        this.listeners.push(f);\n    };\n    WebsocketsService.ngInjectableDef = i0.defineInjectable({ factory: function WebsocketsService_Factory() { return new WebsocketsService(); }, token: WebsocketsService, providedIn: \"root\" });\n    return WebsocketsService;\n}());\nexport { WebsocketsService };\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */ \nimport * as i0 from \"./wsping.component.css.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"./wsping.component\";\nimport * as i3 from \"../../websockets/websockets.service\";\nvar styles_WspingComponent = [i0.styles];\nvar RenderType_WspingComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_WspingComponent, data: {} });\nexport { RenderType_WspingComponent as RenderType_WspingComponent };\nexport function View_WspingComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"button\", [], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\n        var pd_0 = (_co.ping() !== false);\n        ad = (pd_0 && ad);\n    } return ad; }, null, null)), (_l()(), i1.ɵted(-1, null, [\"ping\"])), (_l()(), i1.ɵted(2, null, [\" \", \"\\n\"]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.response; _ck(_v, 2, 0, currVal_0); }); }\nexport function View_WspingComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-wsping\", [], null, null, null, View_WspingComponent_0, RenderType_WspingComponent)), i1.ɵdid(1, 114688, null, 0, i2.WspingComponent, [i3.WebsocketsService], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\nvar WspingComponentNgFactory = i1.ɵccf(\"app-wsping\", i2.WspingComponent, View_WspingComponent_Host_0, {}, {}, []);\nexport { WspingComponentNgFactory as WspingComponentNgFactory };\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */ \nvar styles = [\"\\n/*# sourceMappingURL=wsping.component.css.map*/\"];\nexport { styles as styles };\n","<button (click)=\"ping()\">ping</button> {{ response }}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { WspingComponent } from './wsping/wsping.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: WspingComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class WspingRoutingModule {}\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */ \nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./wsping.module\";\nimport * as i2 from \"../../../node_modules/@angular/router/router.ngfactory\";\nimport * as i3 from \"./wsping/wsping.component.ngfactory\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"./wsping-routing.module\";\nimport * as i7 from \"./wsping/wsping.component\";\nvar WspingModuleNgFactory = i0.ɵcmf(i1.WspingModule, [], function (_l) { return i0.ɵmod([i0.ɵmpd(512, i0.ComponentFactoryResolver, i0.ɵCodegenComponentFactoryResolver, [[8, [i2.ɵEmptyOutletComponentNgFactory, i3.WspingComponentNgFactory]], [3, i0.ComponentFactoryResolver], i0.NgModuleRef]), i0.ɵmpd(4608, i4.NgLocalization, i4.NgLocaleLocalization, [i0.LOCALE_ID, [2, i4.ɵangular_packages_common_common_a]]), i0.ɵmpd(1073742336, i4.CommonModule, i4.CommonModule, []), i0.ɵmpd(1073742336, i5.RouterModule, i5.RouterModule, [[2, i5.ɵangular_packages_router_router_a], [2, i5.Router]]), i0.ɵmpd(1073742336, i6.WspingRoutingModule, i6.WspingRoutingModule, []), i0.ɵmpd(1073742336, i1.WspingModule, i1.WspingModule, []), i0.ɵmpd(1024, i5.ROUTES, function () { return [[{ path: \"\", component: i7.WspingComponent }]]; }, [])]); });\nexport { WspingModuleNgFactory as WspingModuleNgFactory };\n"],"sourceRoot":""}